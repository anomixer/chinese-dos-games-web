{% extends 'base.html' %}


{% block title %}{% if lang == 'zh-Hans' %}å…³äº{% else %}é—œæ–¼{% endif %}{% endblock %}
{% block main %}
    <div class="container mt-3">
<h2>{% if lang == 'zh-Hans' %}ä¸­æ–‡ DOS æ¸¸æˆ{% else %}ä¸­æ–‡ DOS éŠæˆ²{% endif %} ğŸ®</h2>
<h3>{% if lang == 'zh-Hans' %}é¡¹ç›®åœ°å€{% else %}å°ˆæ¡ˆä½å€{% endif %}</h3>
        <p><a href="https://github.com/rwv/chinese-dos-games">https://github.com/rwv/chinese-dos-games</a></p>

<h3>{% if lang == 'zh-Hans' %}æ¸¸æˆåˆ—è¡¨{% else %}éŠæˆ²åˆ—è¡¨{% endif %}</h3>
        <p>
            {% if games %}
                <ul>
                    {% for key, game_info in games.items() %}
                        <li>
<a href="{{ url_for('game', identifier=game_info['identifier']) }}">{{ game_info['name'][lang] }}</a>
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        </p>

<h3>{% if lang == 'zh-Hans' %}æ„Ÿè°¢{% else %}æ„Ÿè¬{% endif %}</h3>
        <p>
        <ul>
            <li><a href="https://github.com/dreamlayers/em-dosbox" target="_blank">dreamlayers/em-dosbox: An Emscripten
                port of DOSBox</a></li>
            <li><a href="https://github.com/db48x/emularity" target="_blank">db48x/emularity: easily embed emulators</a></li>
                
        </ul>
        </p>
<h3>{% if lang == 'zh-Hans' %}ç¼“å­˜{% else %}å¿«å–{% endif %}</h3>
        <p>
            {% if cache_info %}
                {% if lang == 'zh-Hans' %}
                    å½“å‰ç¼“å­˜ï¼š{{ cache_info.total_human }} / {{ cache_info.max_human }}ï¼ˆ{{ cache_info.count }} ä¸ªæ–‡ä»¶ï¼‰
                {% else %}
                    ç›®å‰å¿«å–ï¼š{{ cache_info.total_human }} / {{ cache_info.max_human }}ï¼ˆå…± {{ cache_info.count }} å€‹æª”æ¡ˆï¼‰
                {% endif %}
                <br>
                <small>{% if lang == 'zh-Hans' %}å¯é€šè¿‡ç¯å¢ƒå˜é‡ GAMES_CACHE_MAX_GB è°ƒæ•´ä¸Šé™ã€‚{% else %}å¯é€éç’°å¢ƒè®Šæ•¸ GAMES_CACHE_MAX_GB èª¿æ•´ä¸Šé™ã€‚{% endif %}</small>
            {% endif %}
        </p>

        {% if mode_info %}
        <h3>{% if lang == 'zh-Hans' %}æ¨¡å¼ä¸æ¥æº{% else %}æ¨¡å¼èˆ‡ä¾†æº{% endif %}</h3>
        <p>
            <div><strong>Mode:</strong> {{ mode_info.mode }}</div>
            <div><strong>REMOTE_PREFIX:</strong> {{ mode_info.REMOTE_PREFIX }}</div>
            <div class="text-muted small">
                USE_STREAM_PROXY={{ 1 if mode_info.USE_STREAM_PROXY else 0 }},
                USE_REMOTE_MOUNT={{ 1 if mode_info.USE_REMOTE_MOUNT else 0 }},
                DISABLE_BIN_ROUTE={{ 1 if mode_info.DISABLE_BIN_ROUTE else 0 }},
                STREAM_TIMEOUT_SECS={{ mode_info.STREAM_TIMEOUT_SECS }},
                STREAM_FALLBACK_TO_BIN={{ 1 if mode_info.STREAM_FALLBACK_TO_BIN else 0 }}
            </div>
        </p>
        <div class="mt-2">
            <button class="btn btn-sm btn-outline-primary" onclick="copyEnvPS()">{% if lang == 'zh-Hans' %}ä¸€é”®å¤åˆ¶å½“å‰ç¯å¢ƒå˜é‡ï¼ˆPowerShellï¼‰{% else %}ä¸€éµè¤‡è£½ç›®å‰ç’°å¢ƒè®Šæ•¸ï¼ˆPowerShellï¼‰{% endif %}</button>
            <span id="copy_status" class="ml-2 text-muted" style="display:none"></span>
        </div>
        <script>
            function copyEnvPS() {
                try {
                    const mi = {{ mode_info | tojson }};
                    const lines = [];
                    // ä¾ç›®å‰æ¨¡å¼è¼¸å‡ºå»ºè­°çš„æŒ‡ä»¤
                    if (mi.REMOTE_PREFIX) lines.push(`$env:REMOTE_PREFIX = '${mi.REMOTE_PREFIX}'`);
                    lines.push(`$env:USE_STREAM_PROXY = ${mi.USE_STREAM_PROXY ? 1 : 0}`);
                    lines.push(`$env:USE_REMOTE_MOUNT = ${mi.USE_REMOTE_MOUNT ? 1 : 0}`);
                    lines.push(`$env:DISABLE_BIN_ROUTE = ${mi.DISABLE_BIN_ROUTE ? 1 : 0}`);
                    lines.push(`$env:STREAM_TIMEOUT_SECS = ${mi.STREAM_TIMEOUT_SECS}`);
                    lines.push(`$env:STREAM_FALLBACK_TO_BIN = ${mi.STREAM_FALLBACK_TO_BIN ? 1 : 0}`);
                    lines.push(`python app.py`);
                    const text = lines.join('\n');
                    navigator.clipboard.writeText(text).then(() => {
                        const s = document.getElementById('copy_status');
                        s.textContent = '{{ "å·²è¤‡è£½" if lang == "zh-Hans" else "å·²è¤‡è£½" }}';
                        s.style.display = '';
                        setTimeout(() => { s.style.display = 'none'; }, 1500);
                    });
                } catch (e) {
                    alert('Copy failed: ' + e);
                }
            }
        </script>
        {% endif %}

        <h3>{% if lang == 'zh-Hans' %}è®¸å¯{% else %}è¨±å¯{% endif %}</h3>
        <p><a href="https://www.gnu.org/licenses/gpl-3.0.html">The GNU General Public License v3.0</a></p>
    </div>
{% endblock %}
